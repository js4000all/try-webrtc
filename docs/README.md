# WebRTC P2P Chat (手動シグナリング)

ブラウザの WebRTC DataChannel を用いた、最小構成のP2Pチャットです。シグナリングサーバーは使わず、SDP文字列を手動でコピー＆ペーストして接続します。

## ディレクトリ構成

- `public/`: 静的ファイル（HTML/CSS/JS）
- `docs/`: このドキュメント
- `Makefile`: 簡易な dev/build タスク

## 動かし方

1. サーバを起動
   - `make dev` を実行し、`http://localhost:5173` を開く（ポートは `DEV_PORT` で変更可）。
2. 役割を決める
   - 片方を「オファー側」、もう片方を「アンサー側」に設定。
3. オファー側
   - 「オファーを生成」→ 表示された「自分のSDP」をコピーして相手へ渡す。
   - 相手から届いた「アンサーSDP」を貼り付けて「アンサーを適用」。
4. アンサー側
   - 相手の「オファーSDP」を貼り付けて「オファー適用＆アンサー生成」。
   - 表示された「自分のSDP」をコピーして相手へ渡す。
5. チャット
   - データチャネルが `open` になったら入力欄が有効化され、送受信できます。

## 実装メモ

- STUNサーバー: `stun:stun.l.google.com:19302` を使用（NAT環境では疎通しない場合あり）。
- シンプル化のためトリクルICEは使わず、ICE収集完了まで待ってからSDPを表示します。
- SDPは `JSON.stringify(RTCSessionDescriptionInit)` を Base64 化して1テキストに収めています。

## 注意事項

- 同一LAN内やP2P通る環境向けのデモです。外部ネットワークではTURNが必要になることがあります。
- シグナリングを自動化するには、WebSocket等のサーバーを別途用意してください。
- 機密情報は扱わないでください（暗号化はWebRTCで行われますが、ブラウザ上のデモです）。

